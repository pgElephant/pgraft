cd src && go mod tidy
cd src && go build -buildmode=c-shared -o pgraft_go.dylib pgraft_go.go
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft.o src/pgraft.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_core.o src/pgraft_core.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_go.o src/pgraft_go.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_state.o src/pgraft_state.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_log.o src/pgraft_log.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_kv.o src/pgraft_kv.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_kv_sql.o src/pgraft_kv_sql.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_sql.o src/pgraft_sql.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_guc.o src/pgraft_guc.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_util.o src/pgraft_util.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_apply.o src/pgraft_apply.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_go_callbacks.o src/pgraft_go_callbacks.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -I. -I./ -I/usr/local/pgsql.17/include/server -I/usr/local/pgsql.17/include/internal -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -I/opt/homebrew/opt/openssl@3/include -I/opt/homebrew/opt/icu4c/include   -c -o src/pgraft_json.o src/pgraft_json.c
gcc -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Werror=vla -Werror=unguarded-availability-new -Wendif-labels -Wmissing-format-attribute -Wcast-function-type -Wformat-security -fno-strict-aliasing -fwrapv -fexcess-precision=standard -Wno-unused-command-line-argument -Wno-compound-token-split-by-macro -Wno-format-truncation -Wno-cast-function-type-strict -g -O0 -g3  -fvisibility=hidden -I./include -bundle -o pgraft.dylib src/pgraft.o src/pgraft_core.o src/pgraft_go.o src/pgraft_state.o src/pgraft_log.o src/pgraft_kv.o src/pgraft_kv_sql.o src/pgraft_sql.o src/pgraft_guc.o src/pgraft_util.o src/pgraft_apply.o src/pgraft_go_callbacks.o src/pgraft_json.o -L/usr/local/pgsql.17/lib  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX15.4.sdk   -L/opt/homebrew/opt/openssl@3/lib -L/opt/homebrew/opt/icu4c/lib -Wl,-dead_strip_dylibs   -fvisibility=hidden -bundle_loader /usr/local/pgsql.17/bin/postgres -lpthread -lm -ldl -L/usr/local/pgsql.17/lib -L/opt/homebrew/lib -ljson-c -L./src -Wl,-rpath,@loader_path
